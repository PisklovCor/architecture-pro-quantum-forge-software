## Задание 4. Реализация RAG-бота с техниками промптинга

Создайте работающего RAG-бота, который будет уметь:

- искать информацию в вашей векторной базе знаний;
- формировать ответы с опорой на найденные данные;
- применять техники улучшения качества ответа: Few-shot и Chain-of-Thought.

Такой бот станет той основой, на которой в будущем можно построить корпоративного ассистента, справочную систему или
помощника техподдержки.

## Что нужно сделать

1. Настройте пайплайн RAG

Создайте скрипт или модуль на Python, который способен:

- получать текстовый запрос пользователя,
- преобразовать его в эмбеддинг (тем же энкодером, что и при построении индекса),
- искать ближайшие чанки в векторной базе (Faiss, Chroma и другие),
- формировать промпт с найденными фрагментами,
- отправлять его в LLM (OpenAI, YandexGPT, локальная модель),
- возвращать пользователю результат.

```
Подсказка: если используете LangChain, то возьмите готовую цепочку RetrievalQA, но нужно понимать, что происходит под
капотом.
```

2. Подключите технику Few-shot prompting

Добавьте в промпт 1-2 заранее заданных примера:

```
Q: Как называется столица планеты Ти’лора?  
A: Столица планеты Ти’лора называется Сайрон.

\
Q: [запрос пользователя]
A: ...
```

Примеры должны быть **из той же предметной области,** что и ваша база. Лучше, если они реально извлекаются из базы, а не
просто придумываются «из головы».

3. Подключите Chain-of-Thought (CoT)

В System-промпт добавьте указание, чтобы модель объясняла свои шаги:

```
System: Ты помощник, который сначала размышляет, а потом отвечает. Всегда пиши свои шаги.  
```

Пример желаемого поведения:

```
1. Сначала найду, какая технология используется в HyperRelay.
2. В документе указано, что HyperRelay питается от ядра VoidCore.
3. Следовательно, ответ — VoidCore.
```

4. Постройте интерфейс

Выберите один из вариантов:
- простой REPL (консольный бот),
- REST API (например, через FastAPI),
- Telegram-бот (если уверены в себе).
```
Важно! Интерфейс вторичен. Главное — правильно реализованная цепочка RAG.
```

## Результат

По итогу задания у вас должно получиться:
- Репозиторий с модулем RAG:
- загрузка индекса,
- приём запроса,
- поиск,
- промптинг (few-shot, CoT),
- генерация ответа.
- Запускаемый скрипт или endpoint.
- Примеры 3–5 успешных диалогов.
- Примеры одного-двух случаев, когда бот будет отвечать: «Я не знаю».